{"dependencies":[{"name":"./action","loc":{"line":1,"column":23}},{"name":"./action_descriptor","loc":{"line":2,"column":33}},{"name":"@stimulus/multimap","loc":{"line":3,"column":25}},{"name":"@stimulus/mutation-observers","loc":{"line":4,"column":34}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InlineActionObserver = undefined;\n\nvar _action = require(\"./action\");\n\nvar _action_descriptor = require(\"./action_descriptor\");\n\nvar _multimap = require(\"@stimulus/multimap\");\n\nvar _mutationObservers = require(\"@stimulus/mutation-observers\");\n\nvar InlineActionObserver = /** @class */function () {\n  function InlineActionObserver(context, delegate) {\n    this.context = context;\n    this.delegate = delegate;\n    this.tokenListObserver = new _mutationObservers.TokenListObserver(this.element, this.attributeName, this);\n    this.connectedActions = new _multimap.Multimap();\n  }\n  Object.defineProperty(InlineActionObserver.prototype, \"scope\", {\n    get: function get() {\n      return this.context.scope;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineActionObserver.prototype, \"configuration\", {\n    get: function get() {\n      return this.scope.configuration;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineActionObserver.prototype, \"attributeName\", {\n    get: function get() {\n      return this.configuration.actionAttribute;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineActionObserver.prototype, \"element\", {\n    get: function get() {\n      return this.scope.element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(InlineActionObserver.prototype, \"identifier\", {\n    get: function get() {\n      return this.scope.identifier;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InlineActionObserver.prototype.start = function () {\n    this.tokenListObserver.start();\n  };\n  InlineActionObserver.prototype.stop = function () {\n    this.tokenListObserver.stop();\n  };\n  // Token list observer delegate\n  InlineActionObserver.prototype.elementMatchedTokenForAttribute = function (element, token, attributeName) {\n    if (this.scope.containsElement(element)) {\n      var action = this.buildActionForElementWithDescriptorString(element, token);\n      if (action) {\n        this.connectedActions.add(element, action);\n        this.delegate.inlineActionConnected(action);\n      }\n    }\n  };\n  InlineActionObserver.prototype.elementUnmatchedTokenForAttribute = function (element, token, attributeName) {\n    var action = this.getConnectedActionForElementWithDescriptorString(element, token);\n    if (action) {\n      this.connectedActions.delete(element, action);\n      this.delegate.inlineActionDisconnected(action);\n    }\n  };\n  InlineActionObserver.prototype.getConnectedActionForElementWithDescriptorString = function (element, descriptorString) {\n    var newAction = this.buildActionForElementWithDescriptorString(element, descriptorString);\n    if (newAction) {\n      var actions = this.connectedActions.getValuesForKey(element);\n      return actions.find(function (action) {\n        return action.hasSameDescriptorAs(newAction);\n      });\n    }\n  };\n  InlineActionObserver.prototype.buildActionForElementWithDescriptorString = function (element, descriptorString) {\n    try {\n      var descriptor = _action_descriptor.ActionDescriptor.forElementWithInlineDescriptorString(element, descriptorString);\n      if (descriptor.identifier == this.identifier) {\n        return new _action.Action(this.context, descriptor, descriptor.eventTarget);\n      }\n    } catch (error) {\n      this.context.reportError(error, \"parsing descriptor string \\\"\" + descriptorString + \"\\\" for element\", element);\n    }\n  };\n  return InlineActionObserver;\n}();\nexports.InlineActionObserver = InlineActionObserver;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5saW5lX2FjdGlvbl9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9pbmxpbmVfYWN0aW9uX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFHdEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLG9CQUFvQixDQUFBO0FBRTdDLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSw4QkFBOEIsQ0FBQTtBQU8zRjtJQU1FLDhCQUFZLE9BQWdCLEVBQUUsUUFBc0M7UUFDbEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7UUFDeEIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3RGLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLFFBQVEsRUFBbUIsQ0FBQTtJQUN6RCxDQUFDO0lBRUQsc0JBQUksdUNBQUs7YUFBVDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtDQUFhO2FBQWpCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFBO1FBQ2pDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0NBQWE7YUFBakI7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUE7UUFDM0MsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx5Q0FBTzthQUFYO1lBQ0UsTUFBTSxD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"},"hash":"b3e192ed604352da3af0d1163b33f1f0"}