{"dependencies":[{"name":"./action","loc":{"line":1,"column":23}},{"name":"./action_descriptor","loc":{"line":2,"column":33}},{"name":"./action_set","loc":{"line":3,"column":26}},{"name":"./inline_action_observer","loc":{"line":4,"column":37}},{"name":"./scope","loc":{"line":5,"column":22}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Context = undefined;\n\nvar _action = require(\"./action\");\n\nvar _action_descriptor = require(\"./action_descriptor\");\n\nvar _action_set = require(\"./action_set\");\n\nvar _inline_action_observer = require(\"./inline_action_observer\");\n\nvar _scope = require(\"./scope\");\n\nvar Context = /** @class */function () {\n  function Context(contextSet, element) {\n    this.contextSet = contextSet;\n    this.scope = new _scope.Scope(this.configuration, this.identifier, element);\n    this.actions = new _action_set.ActionSet(this);\n    this.inlineActionObserver = new _inline_action_observer.InlineActionObserver(this, this);\n    try {\n      this.controller = new contextSet.controllerConstructor(this);\n      this.controller.initialize();\n    } catch (error) {\n      this.reportError(error, \"initializing controller \\\"\" + this.identifier + \"\\\"\");\n    }\n  }\n  Context.prototype.connect = function () {\n    this.actions.start();\n    this.inlineActionObserver.start();\n    try {\n      this.controller.connect();\n    } catch (error) {\n      this.reportError(error, \"connecting controller \\\"\" + this.identifier + \"\\\"\");\n    }\n  };\n  Context.prototype.disconnect = function () {\n    try {\n      this.controller.disconnect();\n    } catch (error) {\n      this.reportError(error, \"disconnecting controller \\\"\" + this.identifier + \"\\\"\");\n    }\n    this.inlineActionObserver.stop();\n    this.actions.stop();\n  };\n  Object.defineProperty(Context.prototype, \"application\", {\n    get: function get() {\n      return this.contextSet.application;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Context.prototype, \"identifier\", {\n    get: function get() {\n      return this.contextSet.identifier;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Context.prototype, \"configuration\", {\n    get: function get() {\n      return this.application.configuration;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Context.prototype, \"element\", {\n    get: function get() {\n      return this.scope.element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Context.prototype, \"parentElement\", {\n    get: function get() {\n      return this.element.parentElement;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Context.prototype.addAction = function (actionOrDescriptorString, eventTarget) {\n    var action;\n    if (actionOrDescriptorString instanceof _action.Action) {\n      action = actionOrDescriptorString;\n    } else if (typeof actionOrDescriptorString == \"string\") {\n      var descriptorString = actionOrDescriptorString;\n      if (!isEventTarget(eventTarget)) {\n        eventTarget = this.element;\n      }\n      var descriptor = _action_descriptor.ActionDescriptor.forElementWithInlineDescriptorString(eventTarget, descriptorString);\n      action = new _action.Action(this, descriptor, eventTarget);\n    }\n    if (action) {\n      this.actions.add(action);\n    }\n  };\n  Context.prototype.removeAction = function (action) {\n    this.actions.delete(action);\n  };\n  // Inline action observer delegate\n  Context.prototype.inlineActionConnected = function (action) {\n    this.addAction(action);\n  };\n  Context.prototype.inlineActionDisconnected = function (action) {\n    this.removeAction(action);\n  };\n  // Logging\n  Context.prototype.reportError = function (error, message) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n    var argsFormat = args.map(function (arg) {\n      return \"%o\";\n    }).join(\"\\n\");\n    var format = \"Error %s\\n\\n%o\\n\\n\" + argsFormat + \"\\n%o\\n%o\";\n    return console.error.apply(console, [format, message, error].concat(args, [this.controller, this.element]));\n  };\n  return Context;\n}();\nexports.Context = Context;\n\nfunction isEventTarget(object) {\n  if (!object) {\n    return false;\n  } else if (typeof EventTarget != \"undefined\") {\n    return object instanceof EventTarget;\n  } else {\n    return typeof object.addEventListener == \"function\";\n  }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFDdEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUt4QyxPQUFPLEVBQUUsb0JBQW9CLEVBQWdDLE1BQU0sMEJBQTBCLENBQUE7QUFDN0YsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUUvQjtJQU9FLGlCQUFZLFVBQXNCLEVBQUUsT0FBZ0I7UUFDbEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDcEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFFaEUsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUM1RCxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1FBQzlCLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsK0JBQTRCLElBQUksQ0FBQyxVQUFVLE9BQUcsQ0FBQyxDQUFBO1FBQ3pFLENB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"},"hash":"e4140f4e0bb347ebba47bd4a6634da12"}