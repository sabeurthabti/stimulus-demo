{"dependencies":[{"name":"./data_map","loc":{"line":1,"column":24}},{"name":"./target_set","loc":{"line":2,"column":26}},{"name":"./selectors","loc":{"line":3,"column":44}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scope = undefined;\n\nvar _from = require(\"babel-runtime/core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nvar _data_map = require(\"./data_map\");\n\nvar _target_set = require(\"./target_set\");\n\nvar _selectors = require(\"./selectors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Scope = /** @class */function () {\n  function Scope(configuration, identifier, element) {\n    this.configuration = configuration;\n    this.identifier = identifier;\n    this.element = element;\n    this.targets = new _target_set.TargetSet(this);\n    this.data = new _data_map.DataMap(this);\n  }\n  Scope.prototype.findElement = function (selector) {\n    return this.findAllElements(selector)[0];\n  };\n  Scope.prototype.findAllElements = function (selector) {\n    var head = this.element.matches(selector) ? [this.element] : [];\n    var tail = this.filterElements((0, _from2.default)(this.element.querySelectorAll(selector)));\n    return head.concat(tail);\n  };\n  Scope.prototype.filterElements = function (elements) {\n    var _this = this;\n    return elements.filter(function (element) {\n      return _this.containsElement(element);\n    });\n  };\n  Scope.prototype.containsElement = function (element) {\n    return element.closest(this.controllerSelector) === this.element;\n  };\n  Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n    get: function get() {\n      return (0, _selectors.attributeValueContainsToken)(this.configuration.controllerAttribute, this.identifier);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Scope;\n}();\nexports.Scope = Scope;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvc2NvcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUNwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQU9FLGVBQVksYUFBNEIsRUFBRSxVQUFrQixFQUFFLE9BQWdCO1FBQzVFLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFBO1FBQ2xDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUMvQixDQUFDO0lBRUQsMkJBQVcsR0FBWCxVQUFZLFFBQWdCO1FBQzFCLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzFDLENBQUM7SUFFRCwrQkFBZSxHQUFmLFVBQWdCLFFBQWdCO1FBQzlCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ2pFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUMxQixDQUFDO0lBRUQsOEJBQWMsR0FBZCxVQUFlLFFBQW1CO1FBQWxDLGlCQUVDO1FBREMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBQSxPQUFPLElBQUksT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxFQUE3QixDQUE2QixDQUFDLENBQUE7SUFDbEUsQ0FBQztJQUVELCtCQUFlLEdBQWYsVUFBZ0IsT0FBZ0I7UUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUNsRSxDQUFDO0lBRUQsc0JBQVkscUNBQWtCO2FBQTlCO1lBQ0UsTUFBTSxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdGLENBQUM7OztPQUFBO0lBQ0gsWUFBQztBQUFELENBQUMsQUFwQ0QsSUFvQ0MifQ=="},"hash":"0f8f3bf94489c3e8aa544d8eadac58e6"}